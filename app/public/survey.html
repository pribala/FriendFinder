<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Survey</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/css/select2.min.css" rel="stylesheet" />
	
	<link rel="stylesheet" href="assets/css/main.css">
	<!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script> -->
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
	<script src="https://use.fontawesome.com/c4965b9a48.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/js/select2.min.js"></script>
</head>
<body>
	<div class="container wrapper">
		<h2 class="mt-4">Survey Questions</h2>
		<hr class="my-4">
		<form>
		  <h3>About You</h3>	
		  <div class="form-group">
		    <label for="name"><h4>Name (Required)</h4></label>
		    <input type="text" class="form-control" id="name" placeholder="Enter your name">
		  </div>
		  <div class="form-group">
		    <label for="photoLink"><h4>Link to Photo Image (Required)</h4></label>
		    <input type="text" class="form-control" id="photoLink" placeholder="Enter link to photo image">
		  </div>
		  <hr class="my-4">
		  <h3 class="mt-4">Question 1</h3>
		  <h4>You find it easy to stay relaxed and focused even when there is some pressure.</h4>
		   <div class="form-group">
		    <select class="chosen" id="question1">
			  <option></option>
			</select>
		  </div>
		  <h3 class="mt-4">Question 2</h3>
		  <h4>Generally speaking, you rely more on your experience than your imagination.</h4>
		   <div class="form-group">
		    <select class="chosen" id="question2">
			  <option></option>
			</select>
		  </div>
		  <h3 class="mt-4">Question 3</h3>
		  <h4>Your mind is always buzzing with unexplored ideas and plans.</h4>
		   <div class="form-group">
		    <select class="chosen" id="question3">
			  <option></option>
			</select>
		  </div>
		  <h3 class="mt-4">Question 4</h3>
		  <h4>You rarely do something just out of sheer curiosity.</h4>
		   <div class="form-group">
		    <select class="chosen" id="question4">
			  <option></option>
			</select>
		  </div>
		  <h3 class="mt-4">Question 5</h3>
		  <h4>People can rarely upset you.</h4>
		   <div class="form-group">
		    <select class="chosen" id="question5">
			  <option></option>
			</select>
		  </div>
		  <h3 class="mt-4">Question 6</h3>
		  <h4>It is often difficult for you to relate to other people’s feelings.</h4>
		   <div class="form-group">
		    <select class="chosen" id="question6">
			  <option></option>
			</select>
		  </div>
		  <h3 class="mt-4">Question 7</h3>
		  <h4>In a discussion, truth should be more important than people’s sensitivities.</h4>
		   <div class="form-group">
		    <select class="chosen" id="question7">
			  <option></option>
			</select>
		  </div>
		  <h3 class="mt-4">Question 8</h3>
		  <h4>You rarely get carried away by fantasies and ideas.</h4>
		   <div class="form-group">
		    <select class="chosen" id="question8">
			  <option></option>
			</select>
		  </div>
		  <h3 class="mt-4">Question 9</h3>
		  <h4>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h4>
		   <div class="form-group">
		    <select class="chosen" id="question9">
			  <option></option>
			</select>
		  </div>
		  <h3 class="mt-4">Question 10</h3>
		  <h4>You feel more energetic after spending time with a group of people.</h4>
		   <div class="form-group">
		    <select class="chosen" id="question10">
			  <option></option>
			</select>
		  </div>
		  <button type="submit" class="btn btn-info btn-lg btn-block mt-4" id="submitData"><i class="fa fa-check-circle" aria-hidden="true"></i> Submit</button>
		</form>
	</div>
	<footer class="footer text-center">
		<div class="container align-middle">
			@Copyright PRIYA BALAKRISHNAN
		</div>	
	</footer>
	<script>
		$(document).ready(function() {
			var data = [
			    {
			        id: 1,
			        text: '1 (Strongly Disagree)'
			    },
			    {
			        id: 2,
			        text: '2'
			    },
			    {
			        id: 3,
			        text: '3'
			    },
			    {
			        id: 4,
			        text: '4'
			    },
			    {
			        id: 5,
			        text: '5 (Strongly Agree)'
			    }
			];

			$(".chosen").select2({
			 data: data,
			 placeholder: "Select an option",
	    	 allowClear: true,
	    	 theme: "classic"
			});
	    
		    // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
    		// In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
		    // Our api recognizes the route (/api/friends)... and then runs the associated code (found in apiRoutes.js).
		    // In this case the associated code "saves" the data to the friends.js file
		    $("#submitData").on("click", function(event) {
		      event.preventDefault();
		      // Here we grab the form elements
		   //    	var answers = 		
		   //    	$("#question1").val()+","+ $("#question2").val()+","+$("#question3").val()+","+$("#question4").val()+","+$("#question5").val()+","+$("#question6").val()+","+$("#question7").val()+","+$("#question8").val()+","+$("#question9").val()+","+$("#question10").val();
		   //     var scores = answers.split(",").map(function(item) {
    	// 				return parseInt(item, 10);
					// });
		      var answers = [		
		      	$("#question1").val(), $("#question2").val(), $("#question3").val(), $("#question4").val(), $("#question5").val(), $("#question6").val(), $("#question7").val(), $("#question8").val(), $("#question9").val(), $("#question10").val() ];
		      var scores = answers.map(Number);	
		      var newFriend = {
		        name: $("#name").val().trim(),
		        photo: $("#photoLink").val().trim(),
		        scores: scores
		      };
		      console.log(newFriend);
		      // We give the post method a URL, the object we want to send, then we have a "callback".
		      // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
		      // depending on if a tables is available or not.
		      $.post("/api/friends", newFriend,
		        function(data) {
		          // load tables page upon completion
		          //window.location = "/survey"
		       });
		    });
		});
	</script>
</body>
</html>